{
    "memory_module": {
        "prompt": "Please analyze the following Sokoban game states and actions to generate a brief reflection:\n\nPrevious Game State (Character Matrix):\n{previous_state}\n\nPrevious Action: {previous_action}\n\nCurrent Game State (Character Matrix):\n{current_perception}\n\nLast Action: {last_action}\n\nFocus your reflection on:\n1. How the game state changed after the last action (e.g., player moved, box pushed, box reached target).\n2. Whether the action was effective for the situation (e.g., moved closer to a box, pushed a box towards a target, got stuck).\n3. Patterns or issues to be aware of (e.g., potential deadlocks, inefficient moves, opportunities for multiple box pushes).\n4. Any strategic insights for future actions (e.g., which box to focus on, areas to clear, player positioning).\n\nKeep your reflection under 100 words and focus only on the most important insights for solving the puzzle.",
        "system_prompt": "You are an analytical assistant for a Sokoban AI agent. Your task is to generate a brief, insightful reflection on the game state changes and the effectiveness of recent actions. Focus on strategic insights, potential deadlocks, and patterns that would help the agent make better decisions to solve the Sokoban puzzle. Keep your reflections short, precise, and actionable."
    },
    "reasoning_module": {
        "prompt": "Sokoban Game Quick Guide:\nPrimary Goal: Push all boxes ('$' or '*') onto all target locations ('?' or '*').\nGame Mechanics:\n- The game is played on a grid which can contain Walls (#), Floor ( ), Player (@ or +), Boxes ($, *), and Targets (?).\n- '*': Box on a target.\n- '+': Player on a target.\n- Player can move Up, Down, Left, Right onto an empty floor or target square.\n- Player can push a single box if the square beyond the box (in the direction of the push) is empty (floor or target).\n- Player cannot push a box into a wall or another box.\n- The game is solved when all boxes are on target locations.\n\nKey Strategies:\n1. Box pushing order: Think carefully about which boxes to push first. Some boxes can block others if moved incorrectly.\n2. Avoid deadlocks: Be very careful not to push boxes into corners or against walls where they cannot be moved out. A box in a corner (not a target) is usually a deadlock. Two boxes side-by-side against a wall (not targets) is often a deadlock.\n3. Player positioning: Position the player to push boxes effectively. Sometimes you need to walk around a box.\n4. Clear paths: Ensure there's a path for boxes to reach targets.\n5. Small reversible mistakes are okay, but deadlocks are fatal.\n\nYour response format should contain:\n1. thought: [Your reasoning about the game state and planned action. Consider potential deadlocks and the overall strategy.]\n2. move: [action]\n\nExample responses:\n- thought: The box at (3,2) needs to go to the target at (3,0). I will move up to position myself above the box.\n  move: up\n- thought: I am positioned above the box at (3,1), and the target is at (3,0). Pushing the box up will place it on the target.\n  move: push up\n- thought: The box at (2,2) is blocking the path for the box at (2,3). I need to move the box at (2,2) to the right first.\n  move: push right\n\nFocus on making strategic decisions that solve the puzzle efficiently and avoid deadlocks.\n\nI'll provide perception data (character matrix of the board) and memory context.\n\nPERCEPTION DATA (Current Board - Character Matrix):\n{current_perception}\n\nMEMORY CONTEXT (Summary of recent actions/reflections):\n{memory_summary}\n\nBased on this combined information, what move should be taken next?",
        "system_prompt": "You are an intelligent AI player solving a Sokoban puzzle. Your goal is to make strategic moves to push all boxes onto their designated target locations.\n\nCharacter Meanings:\n'#': Wall\n' ': Floor\n'@': Player on Floor\n'$': Box on Floor\n'?': Target Location\n'*': Box on Target\n'+': Player on Target\n\nIMPORTANT: You MUST format your response using EXACTLY these lines:\nthought: [Your reasoning about the game state and planned action. Be specific about box and target locations if possible. Highlight deadlock avoidance.]\nmove: [action]\n\nWhere [action] must be one of: \"up\", \"down\", \"left\", \"right\", \"push up\", \"push down\", \"push left\", or \"push right\".\nDo not include # or any other prefix. Start directly with \"thought:\" followed by your analysis."
    },
    "base_module": {
        "prompt": "Sokoban Game Quick Guide:\nPrimary Goal: Push all boxes ('$' or '*') onto all target locations ('?' or '*').\nGame Mechanics:\n- The game is played on a grid which can contain Walls (#), Floor ( ), Player (@ or +), Boxes ($, *), and Targets (?).\n- '*': Box on a target.\n- '+': Player on a target.\n- Player can move Up, Down, Left, Right onto an empty floor or target square.\n- Player can push a single box if the square beyond the box (in the direction of the push) is empty (floor or target).\n- Player cannot push a box into a wall or another box.\n- The game is solved when all boxes are on target locations.\n\nAction Space:\nYou must select one of these 8 actions:\n- up: Move player up\n- down: Move player down\n- left: Move player left\n- right: Move player right\n- push up: Push a box upwards\n- push down: Push a box downwards\n- push left: Push a box to the left\n- push right: Push a box to the right\n\nKey Strategies:\n1. Box pushing order: Think carefully about which boxes to push first. Some boxes can block others if moved incorrectly.\n2. Avoid deadlocks: Be very careful not to push boxes into corners or against walls where they cannot be moved out. A box in a corner (not a target) is usually a deadlock. Two boxes side-by-side against a wall (not targets) is often a deadlock.\n3. Player positioning: Position the player to push boxes effectively. Sometimes you need to walk around a box.\n4. Clear paths: Ensure there's a path for boxes to reach targets.\n5. Small reversible mistakes are okay, but deadlocks are fatal.\n\nYour response format should contain:\n1. thought: [Your reasoning about the game state and planned action. Consider potential deadlocks and the overall strategy.]\n2. move: [action]\n\nExample responses:\n- thought: The box at (3,2) needs to go to the target at (3,0). I will move up to position myself above the box.\n  move: up\n- thought: I am positioned above the box at (3,1), and the target is at (3,0). Pushing the box up will place it on the target.\n  move: push up\n- thought: The box at (2,2) is blocking the path for the box at (2,3). I need to move the box at (2,2) to the right first.\n  move: push right\n\nPERCEPTION DATA (Current Board - Character Matrix):\n{current_perception}\n\nBased on this information, what move should be taken next?",
        "system_prompt": "You are an intelligent AI player solving a Sokoban puzzle. Your goal is to make strategic moves to push all boxes onto their designated target locations.\n\nCharacter Meanings:\n'#': Wall\n' ': Floor\n'@': Player on Floor\n'$': Box on Floor\n'?': Target Location\n'*': Box on Target\n'+': Player on Target\n\nIMPORTANT: You MUST format your response using EXACTLY these lines:\nthought: [Your reasoning about the game state and planned action. Be specific about box and target locations if possible. Highlight deadlock avoidance.]\nmove: [action]\n\nWhere [action] must be one of: \"up\", \"down\", \"left\", \"right\", \"push up\", \"push down\", \"push left\", or \"push right\".\nDo not include # or any other prefix. Start directly with \"thought:\" followed by your analysis."
    }
}
