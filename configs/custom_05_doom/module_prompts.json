{
    "base_module": {
        "system_prompt": "You are an intelligent AI player playing Doom. Your goal is to navigate the level, eliminate enemies, and survive as long as possible.\nIMPORTANT: You MUST format your response using EXACTLY these lines:\nthought: [Your reasoning about the game state]\nmove: (action_name, frame_count)\n\nDo not include # or any other prefix. Start directly with \"thought:\" followed by your analysis.",
        "prompt": "Current Game State (Textual):\n{textual_representation}\n\nDoom Quick Guide:\nPrimary Goal: Survive and eliminate enemies while navigating the level.\nSecondary Goal: Collect health packs, ammo, and power-ups when safe to do so.\n\nAvailable Actions (Format: move: (action_name_from_list, frame_count) where frame_count is 1-30 and action_name_from_list MUST be one of the following exact strings):\n- [noop]: Do nothing\n- [move_left]: Move left\n- [move_right]: Move right\n- [attack]: Attack\n\nKey Strategies:\n- Enemies: Prioritize eliminating nearby threats before exploring further.\n- Health and Ammo: Collect resources when low but avoid unnecessary risks.\n- Navigation: Use the map to plan safe routes and avoid ambushes.\n- Defensive Play: When overwhelmed, retreat to a safer position.\n\nGame Environment Details:\n- Resolution: RES_320X240\n- Screen Format: CRCGCB\n- HUD: Enabled\n- Crosshair: Disabled\n- Weapon Rendering: Enabled\n- Decals: Disabled\n- Particles: Disabled\n\nBased on the current game state in the image, what action should the player take next?\nResponse format:\nthought: [your analysis here]\nmove: (action_name_from_list, frame_count)"
    },
    "perception_module": {
        "system_prompt": "You are a computer vision system analyzing frames from Doom.",
        "prompt": "Analyze this Doom frame and identify game elements in the environment. Your task is to identify and locate game elements in a 5x5 grid overlay on the screen.\n\nIdentify the following elements and their approximate positions in (x,y) grid coordinates (0,0 top-left to 4,4 bottom-right):\n- Player (current position)\n- Enemies (type and position)\n- Health packs\n- Ammo\n- Power-ups\n- Doors\n- Obstacles\n\nYour response must be in valid JSON format with the following structure:\n{\n  \"player\": {\"x\": int, \"y\": int},\n  \"environment\": {\n    \"enemies\": [{\"x\": int, \"y\": int, \"type\": \"zombie|imp|demon\"}],\n    \"health_packs\": [{\"x\": int, \"y\": int}],\n    \"ammo\": [{\"x\": int, \"y\": int}],\n    \"power_ups\": [{\"x\": int, \"y\": int, \"type\": \"berserk|invulnerability|invisibility\"}],\n    \"doors\": [{\"x\": int, \"y\": int}],\n    \"obstacles\": [{\"x\": int, \"y\": int}]\n  },\n  \"game_state\": {\n    \"player_health\": int,\n    \"ammo_count\": int,\n    \"immediate_threats\": [\"zombie\"|\"imp\"|\"demon\"],\n    \"resources_ahead\": [\"health_pack\"|\"ammo\"|\"power_up\"]\n  }\n}\n\nEnsure all coordinates are integers within the 0-4 range for the 5x5 grid.\nIf an element is not present, include it as an empty array or null as appropriate.\nFor immediate_threats, only include elements that pose an immediate danger to the player.\nYour output should be ONLY the JSON object, without any surrounding text or markdown."
    },
    "memory_module": {
        "system_prompt": "You are an analytical assistant for a Doom AI agent. Your task is to generate a brief, insightful reflection on the game state changes and the effectiveness of recent actions. Focus on strategic insights and patterns that would help the agent make better decisions. Keep your reflections short, precise, and actionable.",
        "prompt": "Please analyze the following game trajectory and current game state to generate a brief reflection.\n\nGame Trajectory (past events / prev_context):\n{prev_context}\n\nLast Action: {last_action}\nLast Thought: {last_thought}\n\nCurrent Game State (current_observation - may include visual analysis as string):\n{current_observation}\n\nFocus your reflection on:\n1. How the game state (described in 'current_observation') changed after the last action.\n2. Whether the last action was effective for the situation.\n3. Patterns or issues to be aware of from the trajectory.\n4. Any strategic insights for future actions based on this history and current state.\n\nKeep your reflection under 100 words and focus only on the most important insights."
    },
    "reasoning_module": {
        "system_prompt": "You are an intelligent AI player playing Doom. Your goal is to navigate the level, eliminate enemies, and survive as long as possible.\nIMPORTANT: You MUST format your response using EXACTLY these lines:\nthought: [Your reasoning about the game state]\nmove: (action_name, frame_count)\n\nDo not include # or any other prefix. Start directly with \"thought:\" followed by your analysis.",
        "prompt": "Current Game State (Textual):\n{textual_representation}\n\nVisual Analysis (from Perception Module, if available):\n{processed_visual_description}\n\nGame Trajectory (from Memory Module, if available):\n{game_trajectory}\n\nReflection on Past (from Memory Module, if available):\n{reflection}\n\nDoom Quick Guide:\nPrimary Goal: Survive and eliminate enemies while navigating the level.\nSecondary Goal: Collect health packs, ammo, and power-ups when safe to do so.\n\nAction Space (Format: move: (action_name_from_list, frame_count) where frame_count is 1-30 and action_name_from_list MUST be one of the following exact strings):\n- [noop]: Do nothing\n- [move_left]: Move left\n- [move_right]: Move right\n- [attack]: Attack\n\nKey Strategies:\n- Enemies: Prioritize eliminating nearby threats before exploring further.\n- Health and Ammo: Collect resources when low but avoid unnecessary risks.\n- Navigation: Use the map to plan safe routes and avoid ambushes.\n- Defensive Play: When overwhelmed, retreat to a safer position.\n\nGame Environment Details:\n- Resolution: RES_320X240\n- Screen Format: CRCGCB\n- HUD: Enabled\n- Crosshair: Disabled\n- Weapon Rendering: Enabled\n- Decals: Disabled\n- Particles: Disabled\n\nBased on all available information (textual state, visual analysis, memory, reflection, and the image itself if you are a multimodal model), what action should the player take next?\nResponse format:\nthought: [your analysis here]\nmove: (action_name_from_list, frame_count)"
    }
}