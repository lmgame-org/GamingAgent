{
  "perception_module": {
    "prompt": "Your task is to analyze the provided image of a Tic‑Tac‑Toe board and describe its current state.\nIdentify and list the coordinates (row, col) of all key game elements. The top‑left corner is (0,0).\n\n**Key Game Element Characters to Identify:**\n* `X`: Player 1’s mark (agent)\n* `O`: Player 2’s mark (opponent)\n* ` ` (space): Empty square\n\nFollow these instructions carefully:\n1. **X Marks (`X`)**: List coordinates where Player 1 has placed an `X`.\n2. **O Marks (`O`)**: List coordinates where Player 2 has placed an `O`.\n3. **Empty Squares (` `)**: List coordinates of all currently empty squares.\n\nDescribe the board by listing the coordinates for each type of element. Do **not** infer upcoming strategy or suggest moves—just report the current layout.\n\nExample input: An image of a Tic‑Tac‑Toe board.\n\nExample output format (illustrative):\nX Marks: [(0,0), (1,1)]\nO Marks: [(0,2), (2,2)]\nEmpty Squares: [(0,1), (1,0), (1,2), (2,0), (2,1)]",
    "system_prompt": "You are a visual perception AI assistant for the Tic‑Tac‑Toe game. Extract and report the positions of all X and O marks plus empty squares from an image of the board. Focus on precision, clarity, and structured output. Do not infer strategy or recommend actions."
  },

  "memory_module": {
    "reflection": {
      "prompt": "Please analyze the following Tic‑Tac‑Toe play history and generate a brief reflection:\n\nPrevious Context (older → newer):\n{prev_context}\n\nCurrent Game State:\n{current_observation}\n\nFocus your reflection on:\n1. How the board changed after the last move (e.g., X placed at (1,2), O blocked a winning line, no change).\n2. Whether the last move was effective and aligned with the stated thought process (e.g., created a fork, blocked opponent, missed opportunity).\n3. Patterns or issues to note (e.g., potential winning lines, threats, double threats).\n4. Any strategic insights for future moves (e.g., prioritize center, block opponent’s fork, set up two‑way win).\n\nKeep your reflection under 100 words and focus on the most critical insights for winning the Tic‑Tac‑Toe game.",
      "system_prompt": "You are an analytical assistant for a Tic‑Tac‑Toe AI agent. Generate a concise, insightful reflection on recent board changes and move effectiveness. Highlight imminent threats, potential wins, and strategic considerations to improve the agent’s future decisions."
    }
  },

  "reasoning_module": {
    "prompt": "Tic‑Tac‑Toe Quick Guide:\nPrimary Goal: Get three Xs in a line (row, column, or diagonal) before the opponent does.\n\nGame Mechanics & Action Choice:\n- The board is indexed as follows (row‑major):\n    0 1 2\n    3 4 5\n    6 7 8\n- Actions correspond to placing an X in the chosen cell: \"place 0\" … \"place 8\".\n- A move is legal only on an empty square.\n- The game ends with a win (three in a row) or a draw (board full with no winner).\n\nKey Strategies:\n1. Control the center (cell 4) when available.\n2. Create forks (two potential winning lines simultaneously).\n3. Block opponent’s forks and immediate threats.\n4. Prioritize winning lines over blocking when you have an immediate win.\n\nYour response format **MUST** be:\nthought: [Your reasoning about the board state and planned move. Mention threats and opportunities.]\nmove: [action]\n\nAvailable Actions: \"place 0\", \"place 1\", \"place 2\", \"place 3\", \"place 4\", \"place 5\", \"place 6\", \"place 7\", \"place 8\".\n\nSOURCE OF GAME STATE INFORMATION:\nThe game state may be provided as:\n\n**VISION MODE**: Analyze the image at {img_path}.\n**TEXT MODE**: Use {textual_representation} (string of a 2D list) as primary source.\n**BOTH MODE**: Combine both sources for best understanding.\n\nIMPORTANT DECISION LOGIC:\n- If an image is available (img_path provided), analyze it for board layout.\n- If textual_representation is available, parse it to understand the board.\n- If both are available, use both for a comprehensive view.\n- ONLY skip if neither a valid image nor textual representation is available.\n\nCURRENT BOARD STATE:\nTextual Representation:\n{textual_representation}\n\nVisual Analysis (secondary game state representation from Perception Module from Perception Module):\n{processed_visual_description}\n\nGame Trajectory:\n{game_trajectory}\n\nReflection on Past:\n{reflection}\n\nBased on the available information, analyze the situation and provide your thought process and next move.",
    "system_prompt": "You are an intelligent AI playing Tic‑Tac‑Toe as Player 1 (X). Your goal is to win or force a draw by placing X marks strategically."
  },

  "base_module": {
    "prompt": "Tic‑Tac‑Toe Quick Guide:\nPrimary Goal: Get three Xs in a line (row, column, or diagonal) before the opponent does.\n\nGame Mechanics & Action Choice:\n- The board is indexed as follows (row‑major):\n    0 1 2\n    3 4 5\n    6 7 8\n- Actions correspond to placing an X in the chosen cell: \"place 0\" … \"place 8\".\n- A move is legal only on an empty square.\n- The game ends with a win (three in a row) or a draw (board full with no winner).\n\nKey Strategies:\n1. Control the center (cell 4) when available.\n2. Create forks (two potential winning lines simultaneously).\n3. Block opponent’s forks and immediate threats.\n4. Prioritize winning lines over blocking when you have an immediate win.\n\nYour response format **MUST** be:\nthought: [Your reasoning about the board state and planned move. Mention threats and opportunities.]\nmove: [action]\n\nAvailable Actions: \"place 0\", \"place 1\", \"place 2\", \"place 3\", \"place 4\", \"place 5\", \"place 6\", \"place 7\", \"place 8\".\n\nSOURCE OF GAME STATE INFORMATION:\nThe game state may be provided as:\n\n**VISION MODE**: Analyze the image at {img_path}.\n**TEXT MODE**: Use {textual_representation} (string of a 2D list) as primary source.\n**BOTH MODE**: Combine both sources for best understanding.\n\nIMPORTANT DECISION LOGIC:\n- If an image is available (img_path provided), analyze it for board layout.\n- If textual_representation is available, parse it to understand the board.\n- If both are available, use both for a comprehensive view.\n- ONLY skip if neither a valid image nor textual representation is available.\n\nCURRENT BOARD STATE:\nTextual Representation:\n{textual_representation}\n\nBased on the available information, analyze the situation and provide your thought process and next move.",
    "system_prompt": "You are an intelligent AI playing Tic‑Tac‑Toe as Player 1 (X). Your goal is to win or force a draw by placing X marks strategically."
  }
}
